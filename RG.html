<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Item Guesser</title>
    <style>
        /* Rust-inspired CSS */
        body {
            font-family: 'Arial', sans-serif; /* A more common, 'harder' font */
            background-color: #1a1a1a; /* Very dark background */
            color: #d0d0d0; /* Light grey text */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .game-container {
            background-color: #252525; /* Darker panel */
            border-radius: 8px; /* Slightly sharper corners */
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.6); /* More prominent shadow */
            border: 1px solid #404040; /* Subtle border for definition */
            padding: 30px;
            text-align: center;
            width: 100%;
            max-width: 700px;
        }

        h1 {
            color: #c84820; /* Gritty, desaturated red/orange */
            margin-bottom: 25px;
            font-size: 2.8em;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.4);
            letter-spacing: 1px;
            text-transform: uppercase; /* More industrial feel */
        }

        h2 {
            color: #b0b0b0; /* Muted heading color */
            margin-bottom: 20px;
            font-size: 1.9em;
            text-transform: uppercase;
        }

        p {
            color: #a0a0a0; /* Standard paragraph text */
        }

        .screen {
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        button {
            background-color: #a03010; /* Stronger, darker red for primary actions */
            color: white;
            border: 1px solid #702008; /* Darker border */
            padding: 14px 28px; /* Larger hit area */
            margin: 10px;
            border-radius: 5px; /* Slightly sharper button edges */
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            transition: background-color 0.2s ease, transform 0.1s ease, border-color 0.2s ease;
            min-width: 180px; /* Ensure buttons have a minimum width */
            text-transform: uppercase;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3); /* Subtle shadow for depth */
        }

        button:hover {
            background-color: #c04020; /* Brighter red on hover */
            transform: translateY(-2px);
            border-color: #903010;
        }

        button:active {
            background-color: #802505; /* Even darker on click */
            transform: translateY(0);
            box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.4) inset; /* Inset shadow for press effect */
        }

        button:disabled {
            background-color: #444;
            border-color: #333;
            color: #888;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        #choices-container {
            display: grid;
            grid-template-columns: 1fr; /* Default to single column */
            gap: 12px; /* Slightly tighter gap */
            margin-top: 30px;
        }

        /* Adjust for wider screens to make 2 columns */
        @media (min-width: 600px) {
            #choices-container {
                grid-template-columns: 1fr 1fr;
            }
        }

        .choice-button {
            background-color: #383838; /* Darker grey for choice panels */
            color: #d0d0d0;
            border: 1px solid #505050; /* Defined border */
            padding: 18px; /* More padding for text */
            border-radius: 5px; /* Sharper corners */
            cursor: pointer;
            font-size: 1.05em;
            text-align: left;
            transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
            line-height: 1.5;
            min-height: 90px; /* Ensure choices have some height */
            display: flex;
            align-items: center;
            box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.2); /* Subtle depth */
        }

        .choice-button:hover:not(:disabled) {
            background-color: #4a4a4a; /* Slightly lighter on hover */
            border-color: #c84820; /* Rust red highlight on hover */
            box-shadow: 0 0 8px rgba(200, 72, 32, 0.4); /* Glowing effect */
        }

        .choice-button.correct {
            background-color: #3a6a3a; /* Desaturated, deep green */
            border-color: #2a4a2a;
            box-shadow: 0 0 12px rgba(58, 106, 58, 0.6);
        }

        .choice-button.incorrect {
            background-color: #8a3a3a; /* Desaturated, deep red */
            border-color: #6a2a2a;
            box-shadow: 0 0 12px rgba(138, 58, 58, 0.6);
        }

        #progress-text, #score-text {
            font-size: 1.3em;
            margin-bottom: 10px;
            color: #c0c0c0;
            font-weight: bold;
        }

        #feedback-text {
            margin-top: 25px;
            font-weight: bold;
            font-size: 1.6em;
            color: #c84820; /* Rust red for feedback */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            text-transform: uppercase;
        }

        #final-score-text {
            font-size: 1.8em;
            margin-bottom: 30px;
            color: #e0e0e0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Rust Item Guesser</h1>

        <!-- Menu Screen -->
        <div id="menu-screen" class="screen">
            <h2>Choose Difficulty</h2>
            <button id="easy-btn" data-difficulty="easy">Easy (10 Items)</button>
            <button id="medium-btn" data-difficulty="medium">Medium (25 Items)</button>
            <button id="expert-btn" data-difficulty="expert">Expert (All Items)</button>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen hidden">
            <p id="progress-text">0/0</p>
            <p id="score-text">Score: 0</p>
            <h2 id="question-text">What description belongs to: Item Name?</h2>
            <div id="choices-container">
                <!-- Choices will be injected here by JavaScript -->
            </div>
            <p id="feedback-text" class="hidden"></p>
        </div>

        <!-- Results Screen -->
        <div id="results-screen" class="screen hidden">
            <h2>Game Over!</h2>
            <p id="final-score-text"></p>
            <button id="restart-btn">Play Again</button>
        </div>
    </div>

    <script>
        // script.js content goes here
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const menuScreen = document.getElementById('menu-screen');
            const gameScreen = document.getElementById('game-screen');
            const resultsScreen = document.getElementById('results-screen');

            const easyBtn = document.getElementById('easy-btn');
            const mediumBtn = document.getElementById('medium-btn');
            const expertBtn = document.getElementById('expert-btn');
            const restartBtn = document.getElementById('restart-btn');

            const progressText = document.getElementById('progress-text');
            const scoreText = document.getElementById('score-text');
            const questionText = document.getElementById('question-text');
            const choicesContainer = document.getElementById('choices-container');
            const feedbackText = document.getElementById('feedback-text');
            const finalScoreText = document.getElementById('final-score-text');

            // Game Variables
            let allItems = []; // Stores all items for the game
            let gameItems = []; // Items for the current game session
            let currentItemIndex = 0;
            let score = 0;
            let totalQuestions = 0;
            let currentDifficulty = '';

            // --- EMBED YOUR ITEMS.JSON DATA HERE ---
            // IMPORTANT: Replace the content below with your actual items.json data.
            // It must be a valid JavaScript array of objects.
            allItems = [
              {
                "name": "Stone Hatchet",
                "info": "A crude hatchet, useful for chopping wood and breaking stones."
              },
              {
                "name": "Torch",
                "info": "Provides a small amount of light and heat. Can be used as a weapon."
              },
              {
                "name": "Bandage",
                "info": "Heals a small amount of health over time. Stops bleeding."
              },
              {
                "name": "5.56 Rifle Ammo",
                "info": "Ammunition for a Rifle. Loses velocity when fired over long distances resulting in slightly decreased damage."
              },
              {
                "name": "Shotgun Shell",
                "info": "Single large projectile for a Shotgun. Effective at close range."
              },
              {
                "name": "Metal Ore",
                "info": "Raw metal, can be smelted in a furnace to produce Metal Fragments."
              },
              {
                "name": "Low Grade Fuel",
                "info": "A basic combustible fuel, used in furnaces, lamps, and various other crafting recipes."
              },
              {
                "name": "Wood",
                "info": "Basic building material, essential for crafting and construction."
              },
              {
                "name": "Stones",
                "info": "Common resource, used for crafting tools, foundations, and more."
              },
              {
                "name": "Cloth",
                "info": "Soft material, used for crafting clothing, bandages, and other items."
              },
              {
                "name": "Road Sign Kilt",
                "info": "A kilt made from road signs, offers good protection and a unique aesthetic."
              },
              {
                "name": "Large Furnace",
                "info": "A large version of the furnace, capable of smelting more resources at once."
              },
              {
                "name": "Assault Rifle",
                "info": "A high-tier, fully automatic rifle, deadly at medium to long ranges."
              },
              {
                "name": "Medical Syringe",
                "info": "Instantly restores a significant amount of health. Consumable."
              },
              {
                "name": "Explosive 5.56 Rifle Ammo",
                "info": "Ammunition that explodes on impact, dealing area damage and destroying weaker structures."
              },
              {
                "name": "Water Pipe Shotgun",
                "info": "A makeshift single-shot shotgun, effective in close quarters."
              },
              {
                "name": "Bear Trap",
                "info": "A deployable trap that deals damage and immobilizes players or animals."
              },
              {
                "name": "Scrap",
                "info": "A valuable resource used for crafting, trading at Bandit Camp, and researching blueprints."
              },
              {
                "name": "Auto Turret",
                "info": "A deployable automated defense system that shoots enemies."
              },
              {
                "name": "M249",
                "info": "A rare and powerful light machine gun, featuring a large magazine capacity and high rate of fire."
              },
              {
                "name": "C4 (Timed Explosive)",
                "info": "A powerful explosive used for raiding and destroying strong fortifications."
              },
              {
                "name": "Rocket Launcher",
                "info": "A heavy weapon that fires rockets, ideal for breaching heavily fortified bases."
              },
              {
                "name": "Research Table",
                "info": "Used to research new blueprints from items you possess."
              },
              {
                "name": "Work Bench Level 1",
                "info": "The most basic workbench, allows crafting of simple tools and items."
              },
              {
                "name": "Work Bench Level 2",
                "info": "An intermediate workbench, unlocks more complex crafting recipes."
              },
              {
                "name": "Work Bench Level 3",
                "info": "The highest tier workbench, required for crafting the most advanced items in the game."
              },
              {
                "name": "Armored Door",
                "info": "The strongest door available, resistant to most forms of attack."
              },
              {
                "name": "Large Wood Box",
                "info": "A basic storage container with a large capacity."
              },
              {
                "name": "Garage Door",
                "info": "A wide, retractable door often used for vehicle access or main base entrances."
              },
              {
                "name": "Supply Drop",
                "info": "A crate dropped from an airplane containing valuable loot."
              }
            ];
            // --- END OF EMBEDDED ITEMS.JSON DATA ---

            // --- Utility Functions ---

            // Shuffles an array (Fisher-Yates algorithm)
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // Displays a specific screen and hides others
            function showScreen(screenToShow) {
                menuScreen.classList.add('hidden');
                gameScreen.classList.add('hidden');
                resultsScreen.classList.add('hidden');
                screenToShow.classList.remove('hidden');
            }

            // --- Game Logic ---

            // Initializes the game or shows an error if items data is bad
            function initializeGame() {
                // Basic validation: ensure allItems is an array and has items
                if (!Array.isArray(allItems) || allItems.length === 0) {
                    alert('Error: Item data is empty or not a valid array. Please check the embedded data in the script.');
                    return; // Stop initialization
                }
                // Further validation: ensure each item has 'name' and 'info'
                if (!allItems.every(item => item.name && item.info)) {
                    alert('Error: Some items in the embedded data are missing "name" or "info" properties.');
                    return; // Stop initialization
                }
                console.log('Items loaded:', allItems.length);
                showMenu();
            }

            // Shows the main menu
            function showMenu() {
                showScreen(menuScreen);
                feedbackText.classList.add('hidden'); // Hide any previous feedback
                feedbackText.textContent = '';
            }

            // Starts the game based on chosen difficulty
            function startGame(difficulty) {
                currentDifficulty = difficulty;
                currentItemIndex = 0;
                score = 0;
                feedbackText.classList.add('hidden'); // Hide feedback from previous game

                // Determine game items based on difficulty
                if (difficulty === 'expert') {
                    gameItems = shuffleArray([...allItems]); // Use all items, shuffled
                } else {
                    const numItems = difficulty === 'easy' ? 10 : 25;
                    // Ensure we don't try to get more items than available
                    const itemsToPick = Math.min(numItems, allItems.length);
                    // Shuffle allItems and take the required number
                    gameItems = shuffleArray([...allItems]).slice(0, itemsToPick);
                }

                totalQuestions = gameItems.length;
                console.log(`Starting ${difficulty} game with ${totalQuestions} items.`);

                // If no items are selected (e.g., embedded data is too small for difficulty), go back to menu
                if (totalQuestions === 0) {
                    alert('Not enough items available for this difficulty. Please add more items to the embedded data or choose an easier difficulty.');
                    showMenu();
                    return;
                }

                showScreen(gameScreen);
                displayNextQuestion();
            }

            // Displays the current question
            function displayNextQuestion() {
                if (currentItemIndex >= totalQuestions) {
                    endGame();
                    return;
                }

                const currentItem = gameItems[currentItemIndex];
                questionText.textContent = `What description belongs to: ${currentItem.name}?`;
                scoreText.textContent = `Score: ${score}`;
                progressText.textContent = `Question: ${currentItemIndex + 1}/${totalQuestions}`;

                // Clear previous choices and feedback
                choicesContainer.innerHTML = '';
                feedbackText.classList.add('hidden');
                feedbackText.textContent = '';

                // Generate choices
                const correctDescription = currentItem.info;
                const incorrectDescriptions = new Set(); // Use a Set to ensure uniqueness

                // Filter out the current item and get other descriptions
                const otherItems = allItems.filter(item => item.name !== currentItem.name && item.info);

                // Populate incorrect descriptions (max 3)
                const shuffledOtherItems = shuffleArray(otherItems);
                for (let i = 0; incorrectDescriptions.size < 3 && i < shuffledOtherItems.length; i++) {
                    incorrectDescriptions.add(shuffledOtherItems[i].info);
                }

                // Combine correct and unique incorrect descriptions
                const allChoices = [
                    { text: correctDescription, isCorrect: true },
                    ...Array.from(incorrectDescriptions).map(info => ({ text: info, isCorrect: false }))
                ];

                // Ensure there are always 4 choices if possible. If not enough unique incorrect ones,
                // the game will proceed with fewer choices. This makes it more robust for small datasets.
                while (allChoices.length < 4 && allChoices.length < allItems.length) {
                    // Find a random item not already represented in choices
                    const randomItem = allItems[Math.floor(Math.random() * allItems.length)];
                    if (randomItem.info && !allChoices.some(choice => choice.text === randomItem.info)) {
                        allChoices.push({ text: randomItem.info, isCorrect: false });
                    }
                }

                // Shuffle choices before displaying
                shuffleArray(allChoices);

                // Create and append choice buttons
                allChoices.forEach(choice => {
                    const button = document.createElement('button');
                    button.classList.add('choice-button');
                    button.textContent = choice.text;
                    if (choice.isCorrect) {
                        button.dataset.correct = 'true';
                    }
                    button.addEventListener('click', () => handleChoiceClick(button));
                    choicesContainer.appendChild(button);
                });
            }

            // Handles a choice button click
            function handleChoiceClick(selectedButton) {
                const isCorrect = selectedButton.dataset.correct === 'true';
                const allChoiceButtons = choicesContainer.querySelectorAll('.choice-button');

                // Disable all buttons to prevent multiple clicks
                allChoiceButtons.forEach(btn => btn.disabled = true);

                if (isCorrect) {
                    score++;
                    selectedButton.classList.add('correct');
                    feedbackText.textContent = 'Correct!';
                    feedbackText.style.color = '#3a6a3a'; // Desaturated green for correct feedback
                } else {
                    selectedButton.classList.add('incorrect');
                    feedbackText.textContent = 'Incorrect!';
                    feedbackText.style.color = '#8a3a3a'; // Desaturated red for incorrect feedback
                    // Highlight the correct answer
                    const correctAnswerButton = choicesContainer.querySelector('[data-correct="true"]');
                    if (correctAnswerButton) {
                        correctAnswerButton.classList.add('correct');
                    }
                }
                feedbackText.classList.remove('hidden');

                currentItemIndex++;

                // Wait a bit, then display next question or end game
                setTimeout(() => {
                    displayNextQuestion();
                }, 1500); // 1.5 second delay
            }

            // Ends the game and shows results
            function endGame() {
                showScreen(resultsScreen);
                finalScoreText.textContent = `You scored ${score} out of ${totalQuestions} items!`;
            }

            // --- Event Listeners ---

            easyBtn.addEventListener('click', () => startGame('easy'));
            mediumBtn.addEventListener('click', () => startGame('medium'));
            expertBtn.addEventListener('click', () => startGame('expert'));
            restartBtn.addEventListener('click', showMenu);

            // Initial game setup
            initializeGame();
        });
    </script>
</body>
</html>